

dependencies:
  cache_directories:
    - "~/hyrise/dependencies/"
    - "~/hyrise/build/"
    - "~/hyrise/.build/"

  pre:
    - sudo bash ./tools/install_circleci.sh
    - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
    - sudo apt-get install gcc-4.8 g++-4.8
    
checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - cp makefiles/settings.default.mk settings.mk
    - sed -i '4i WITH_MYSQL := 0' settings.mk

test:
  pre:
    - make -j 8
  override:
    - make ci_test